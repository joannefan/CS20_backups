<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Joe's Hotdogs</title>
        <link href="styles.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div class="container">
            <div class="overlay"></div>
            <h1>Joe's Hotdog Stand</h1>
            <table id="receipt">
                <tr>
                    <th>DESCRIPTION</th>
                    <th>QUANTITY</th>
                    <th>PRICE</th>
                </tr>
            </table>
        </div>

        <script>
            // Constants
            const HOTDOG = 3.75;
            const FRIES = 3;
            const DRINK = 2.50;
            const TAX = 0.0625;

            // Function declarations
            function newReceiptRow(name, value, qty = "&nbsp;") {
                formattedVal = currencyStr(value);
                rowData = `<tr><td>${name}</td><td>${qty}</td><td>${formattedVal}</td></tr>`;
                document.getElementById("receipt").innerHTML += rowData;
                    
            }
            function currencyStr(value) {
                rounded = Math.round(value * 100) / 100;
                
                if (Math.round(value) - rounded == 0) {
                    rounded += ".00";
                } else {
                    rounded += "";
                    // has only one decimal place, e.g., 2.5, so we add a trailing 0
                    if (rounded.split(".")[1].length === 1) {
                        rounded += "0";
                    }
                }
                return "$" + rounded;
            }

            numDogs = prompt("How many hotdogs do you want?", "0");
            numFries = prompt("How many french fries do you want?", "0");
            numSoda = prompt("How many sodas do you want?", "0");

            totalPriceDogs = numDogs * HOTDOG;
            totalPriceFries = numFries * FRIES;
            totalPriceSodas = numSoda * DRINK;

            order = [
                ["Hot Dog", totalPriceDogs, numDogs], 
                ["French Fries", totalPriceFries, numFries],
                ["Soda", totalPriceSodas, numSoda]
            ];
            for (const item of order) {
                if (item[1] != "0") {
                    newReceiptRow(item[0], item[1], item[2]);
                }
            }
            
            subtotal = totalPriceDogs + totalPriceFries + totalPriceSodas;
            newReceiptRow("Subtotal Before Discount", subtotal);

            discount = 0;
            if (subtotal >= 25) {
                discount = 0.1 * subtotal;
                subtotal -= discount;
            }
            newReceiptRow("Discount", discount);
            newReceiptRow("Subtotal After Discount", subtotal);

            taxAmount = TAX * subtotal;
            newReceiptRow("Tax", taxAmount);

            total = taxAmount + subtotal;
            newReceiptRow("Final Total", total);            
        </script>
    </body>
</html>